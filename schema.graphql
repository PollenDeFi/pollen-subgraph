enum ProposalType {
  Invest
  Divest
  Last
}

enum TokenType {
  ERC20
  Last
}

enum ProposalStatus {
  Null
  Submitted
  Executed
  Last
}

type Proposal @entity {
  id: ID!
  proposalType: ProposalType!
  assetToken: AssetToken!
  assetTokenAmount: BigDecimal!
  pollenAmount: BigDecimal!
  description: String!
  submitter: Bytes!
  snapshot: Snapshot!
  yesVotes: BigDecimal!
  noVotes: BigDecimal!
  votingExpiry: BigInt!
  executionOpen: BigInt!
  executionExpiry: BigInt!
  status: ProposalStatus!
  votePassed: Boolean!
  executedAt: BigInt
}

type Snapshot @entity {
  id: ID!
  pollenSupply: BigDecimal!
}

type AssetToken @entity {
  id: ID!
  name: String!
  symbol: String!
  type: TokenType!
  daoBalance: BigDecimal!
}

type Portfolio @entity {
  id: ID!
  contract: Bytes!
  assets: [AssetToken!]
}

enum RewardType {
  ProposalSubmission
  ProposalExecution
  CommunityDistribution
}

type Governance @entity {
  id: ID!
  holdings: [GovTokenHoldings!]
  totalDistributed: BigDecimal!
  awaitingDistribution: BigDecimal!
  earnedRewards: [EarnedReward!] 
  earnableRewards: [EarnableReward!]
}

type GovTokenHoldings @entity {
  id: ID! # user address
  totalDistributed: BigDecimal!
  awaitingDistribution: BigDecimal!
}

type EarnedReward @entity {
  id: ID!
  receiver: Bytes!
  amount: BigDecimal!
  distributed: Boolean!
  type: RewardType!
  earnedAt: BigInt! # Timestamp
}

type EarnableReward @entity {
  id: ID!
  type: RewardType!
  amount: BigDecimal!
}

type Whitelist @entity {
  id: ID!
  addresses: [Bytes!]
}
